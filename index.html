<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta property="og:title" content="Heart Animation" />
  <title>Made By Pinakk.io</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet" />

  <style>
    /* Lyrics styling */
    .lyrics-container {
      position: relative;
      text-align: center;
      z-index: 1000;
      padding: 20px 20px 0;
      width: 90%;
      max-width: 700px;
      margin: 40px auto 0;
      font-family: 'Poppins', sans-serif;
      min-height: 150px;
      height: auto;
      overflow: visible;
    }
    .lyric-line {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 0;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
    }
    .word {
      opacity: 0;
      font-size: 3rem;
      font-weight: 700;
      margin: 0 8px;
      color: #fff;
      display: inline-block;
    }
    audio {
      display: none;
    }

    /* Glassmorphism music control */
    #musicControl {
      position: fixed;
      top: 2rem;
      right: 2rem;
      width: 3.5rem;
      height: 3.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 1rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      cursor: pointer;
      z-index: 1001;
      transition: transform 0.2s ease;
    }
    #musicControl:hover {
      transform: scale(1.1);
    }
    #musicControl svg {
      width: 1.5rem;
      height: 1.5rem;
      color: #fff;
    }
    #musicControl.paused svg {
      transform: rotate(90deg);
    }

    /* ✅ Watermark Styling */
    .watermark {
      position: fixed;
      bottom: 10px;
      right: 15px;
      font-size: 0.9rem;
      font-family: 'Poppins', sans-serif;
      color: rgba(255, 255, 255, 0.6);
      z-index: 2000;
      user-select: none;
      pointer-events: none;
    }

    /* Mobile tweaks */
    @media (max-width: 600px) {
      .lyrics-container {
        padding-top: 60px;
      }
      .lyric-line {
        top: 40%;
      }
    }
  </style>
</head>

<body>
  <!-- Autoplay background music -->
  <audio id="birthdaySong" autoplay loop>
    <source src="music.mp3" type="audio/mp3" />
    Your browser does not support the audio element.
  </audio>

  <!-- Glassmorphism Music Control -->
  <div id="musicControl" class="playing">
    <svg id="musicIcon" xmlns="http://www.w3.org/2000/svg" 
         viewBox="0 0 24 24" fill="none" stroke="currentColor" 
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M9 18V5l12-2v13"></path>
      <circle cx="6" cy="18" r="3"></circle>
      <circle cx="18" cy="16" r="3"></circle>
    </svg>
  </div>

  <div class="container">
    <!-- Your heart animations (from scripts.js) -->
    <div class="heart"></div>
    <div class="lyrics-container" id="lyrics"></div>
  </div>

  <!-- ✅ Watermark -->
  <div class="watermark">Made By Pinak</div>

  <!-- Anime.js for lyric animations -->
  <script src="anime.min.js"></script>
  <!-- Original heart animation script -->
  <script src="scripts.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const audio = document.getElementById("birthdaySong");
      const control = document.getElementById("musicControl");
      const lyricsContainer = document.getElementById("lyrics");

      // your existing volume/play setup…
      audio.volume = 0.5;
      audio.play().catch(() => {});

      control.addEventListener("click", () => {
        if (audio.paused) audio.play();
        else audio.pause();
      });
      audio.addEventListener("play",  () => control.classList.remove("paused"));
      audio.addEventListener("pause", () => control.classList.add("paused"));

      // —— NEW LYRIC SYNC LOGIC —— 
      const lyrics = [
        { time:    0, text: "AARE JAB TU, BHADAKTI HAIN" },
        { time: 2200, text: "DIL PE CHALE" },
        { time: 3800, text: "GOLIYAAN..., ... ... ... ... ..." },
        { time: 5700, text: "HAAYE..." },
      ];

      let shown = new Set();
      let lastTime = 0;

      audio.addEventListener("timeupdate", () => {
        const t = audio.currentTime * 1000;

        if (t < lastTime) {
          shown.clear();
          lyricsContainer.innerHTML = "";
        }

        lyrics.forEach((lyric, idx) => {
          if (t >= lyric.time && !shown.has(idx)) {
            shown.add(idx);
            showLine(lyric.text);
          }
        });

        lastTime = t;
      });

      function showLine(text) {
        lyricsContainer.innerHTML = "";
        const line = document.createElement("div");
        line.className = "lyric-line";
        lyricsContainer.appendChild(line);

        let delayAcc = 0;
        text.split(" ").forEach(word => {
          const w = document.createElement("div")
          w.className = "word";
          w.textContent = word;
          line.appendChild(w);

          setTimeout(() => {
            anime({
              targets: w,
              opacity:   [0, 1],
              translateY:[30, 0],
              duration:  900,
              delay:     anime.stagger(100),
              easing:    "easeOutBack"
            });
          }, delayAcc);

          delayAcc += 250;
        });

        anime({
          targets:  line,
          opacity:  [0, 1],
          duration: 600,
          easing:   "easeInOutSine"
        });
      }
    });
  </script>
</body>
</html>
